# **Task Manager API**

## **1. Общая информация о проекте**

**Название проекта**: Task Manager API
**Тип проекта**: Веб-приложение (REST API)
**Цель**: Разработка полнофункционального backend-сервиса для управления проектами и задачами с использованием Django REST Framework.
**Технологии**: Django, Django REST Framework, PostgreSQL, Docker, Nginx, Gunicorn.
**Среда разработки**: Python 3.11, SQLite, VSCode, Docker.

---

## **2. Назначение и функциональность**

**Task Manager API** — это серверная часть системы управления проектами. Система позволяет пользователям создавать и редактировать проекты, управлять задачами, отслеживать статусы, приоритеты, сроки выполнения и исполнителей.

### **Основной функционал:**

- Поддержка операций **CRUD** для проектов и задач;
- Гибкая **фильтрация и поиск** задач по различным параметрам (статус, дедлайн, приоритет и др.);
- **Привязка задач** к пользователям и проектам;
- Получение **статистики** по проектам;
- **Аутентификация и авторизация** пользователей;
- Поддержка контейнеризации с помощью **Docker**;
- Возможность **деплоя на VPS** с использованием **Gunicorn** и **Nginx**;
- Автоматически генерируемая документация API (Swagger / ReDoc).

---

## **3. Архитектура проекта**

### **3.1 Структура проекта**

```plaintext
task-manager-api/
├── task_manager/         # Главный Django-проект
├── tasks/                # Приложение управления задачами
├── scripts/              # Bash-скрипты для деплоя
├── nginx/                # Конфигурация Nginx
├── Dockerfile            # Сборка образа
├── docker-compose.yml    # Сервисы Docker
├── requirements.txt      # Зависимости проекта
```

### **3.2 Стек технологий**

| Компонент       | Технология                      |
| --------------- | ------------------------------- |
| Язык            | Python 3.11                     |
| Framework       | Django 4.2, DRF 3.14            |
| База данных     | SQLite (dev), PostgreSQL (prod) |
| Документация    | drf-yasg (Swagger / OpenAPI)    |
| Контейнеризация | Docker, docker-compose          |
| Сервер          | Gunicorn                        |
| Веб-сервер      | Nginx                           |
| Тестирование    | Pytest, pytest-django           |

---

## **4. Реализация и особенности**

### **4.1 API архитектура**

Проект реализован как REST API. Использованы ViewSets и роутинг с помощью `DefaultRouter`.

**Примеры маршрутов:**

```plaintext
/api/projects/               - список проектов
/api/projects/{id}/tasks/    - задачи проекта
/api/tasks/my_tasks/         - задачи текущего пользователя
```

Поддерживаются методы `GET`, `POST`, `PUT`, `PATCH`, `DELETE`.
Аутентификация реализована через токены (`TokenAuthentication`).

---

### **4.2 Модель данных**

- **Project** — содержит поля: название, описание, активность, владелец, дата создания.
- **Task** — связана с проектом и пользователем, содержит статус, приоритет, дедлайн и описание.

Используются связи `ForeignKey`, `related_name`, `on_delete`.

---

### **4.3 ORM и SQL-запросы**

Для работы с данными применяется Django ORM. Проект также содержит примеры SQL-запросов, использовавшихся для отладки и обучения (например, `JOIN`, `FILTER`, `AGGREGATE`).

---

### **4.4 Фильтрация и поиск**

Для задач и проектов реализованы фильтры по следующим параметрам:

- статус (`status`)
- приоритет (`priority`)
- исполнитель (`assignee`)
- наличие дедлайна, просроченность (`is_overdue`)
- текстовый поиск (`search`)
- сортировка (`ordering`)

---

### **4.5 Тестирование**

Использован **pytest** для модульного и интеграционного тестирования.

**Структура тестов:**

```plaintext
tasks/tests/
├── test_models.py
├── test_api_projects.py
└── test_api_tasks.py
```

Запуск осуществляется через `pytest`, поддерживается проверка покрытия (`pytest --cov`).

---

### **4.6 Документация API**

Интерактивная документация автоматически доступна по следующим адресам:

- Swagger: `http://localhost:8000/swagger/`
- ReDoc: `http://localhost:8000/redoc/`

---

## **5. Контейнеризация и деплой**

### **5.1 Docker**

Приложение контейнеризировано с использованием **Docker** и **docker-compose**.

**Основные сервисы:**

- `web`: Django приложение
- `db`: PostgreSQL
- `nginx`: Веб-сервер

Команда для запуска:

```bash
docker-compose up --build
```

---

### **5.2 Деплой на сервер (VPS)**

Для деплоя используется связка:

- **Gunicorn** (WSGI сервер)
- **Nginx** (reverse proxy + static)
- **Systemd / Screen** — для управления процессами

Поддерживается автоматический деплой через скрипт `scripts/deploy.sh`.

---

## **6. Установка и запуск**

### **6.1 Локальный запуск**

```bash
git clone https://github.com/yourusername/task-manager-api.git
cd task-manager-api
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```

### **6.2 Запуск через Docker**

```bash
docker-compose up --build
docker-compose exec web python manage.py migrate
docker-compose exec web python manage.py createsuperuser
```

---

## **7. Примеры API-запросов**

### Получить список задач (с фильтрацией)

```bash
curl -X GET "http://127.0.0.1:8000/api/tasks/?status=todo&priority=3"
```

### Создать проект

```bash
curl -X POST http://127.0.0.1:8000/api/projects/ \
-H "Content-Type: application/json" \
-d '{"name": "Новый проект", "is_active": true}'
```

---

## **8. Результаты выполнения**

### Чек-лист:

- [x] Реализован backend на Django
- [x] Поддержка CRUD для задач и проектов
- [x] Аутентификация пользователей
- [x] Фильтрация, сортировка, поиск
- [x] Документация (Swagger / Redoc)
- [x] Покрытие тестами с использованием pytest
- [x] Поддержка Docker и деплой на VPS
- [x] Примеры curl / Postman коллекция
- [x] Сопроводительная документация

---

## **9. Выводы**

В рамках учебного проекта был разработан и задокументирован REST API для управления задачами. Реализация охватывает ключевые аспекты backend-разработки: проектирование API, работа с базами данных, тестирование, документация и деплой.

Проект подходит как основа для дальнейшего развития в сторону:

- добавления frontend-интерфейса;
- интеграции с внешними сервисами (например, телеграм-бот);
- настройки CI/CD пайплайнов.

---

## **10. Приложения**

- Swagger документация: [http://127.0.0.1:8000/swagger/](http://127.0.0.1:8000/swagger/)
- ReDoc документация: [http://127.0.0.1:8000/redoc/](http://127.0.0.1:8000/redoc/)
- Postman коллекция: см. раздел "Примеры API-запросов"
- Сценарий деплоя: `scripts/deploy.sh`
